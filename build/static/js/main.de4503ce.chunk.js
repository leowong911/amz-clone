(this["webpackJsonpamazone-clone"]=this["webpackJsonpamazone-clone"]||[]).push([[0],{110:function(e,t,c){},111:function(e,t,c){},112:function(e,t,c){},115:function(e,t,c){"use strict";c.r(t);var n=c(2),a=c.n(n),s=c(16),i=c.n(s),r=(c(69),c(56)),o=c(9),j=(c(70),c(71),c(57)),l=c.n(j),d=c(58),u=c.n(d),b=c(18),h=c(3),m=Object(n.createContext)(),O=function(e){var t=e.reducer,c=e.initialState,a=e.children;return Object(h.jsx)(m.Provider,{value:Object(n.useReducer)(t,c),children:a})},p=function(){return Object(n.useContext)(m)},x=c(42),_=x.a.initializeApp({apiKey:"AIzaSyDMd6PsLG5JgB9ie4KUpZ1U1n5euPiWdmE",authDomain:"clone-5ec49.firebaseapp.com",projectId:"clone-5ec49",storageBucket:"clone-5ec49.appspot.com",messagingSenderId:"934105287628",appId:"1:934105287628:web:5c99c4bf9c6764bd852b69",measurementId:"G-V266MB0L9L"}).firestore(),g=x.a.auth();var f=function(){var e=p(),t=Object(o.a)(e,2),c=t[0],n=c.basket,a=c.user;return t[1],Object(h.jsxs)("div",{className:"header",children:[Object(h.jsx)(b.b,{to:"/",children:Object(h.jsx)("img",{className:"header__logo",src:"http://pngimg.com/uploads/amazon/amazon_PNG11.png"})}),Object(h.jsxs)("div",{className:"header__search",children:[Object(h.jsx)("input",{className:"header__searchInput",type:"text"}),Object(h.jsx)(l.a,{className:"header__searchIcon"})]}),Object(h.jsxs)("div",{className:"header__nav",children:[Object(h.jsx)(b.b,{to:!a&&"/login",children:Object(h.jsxs)("div",{className:"header__option",onClick:function(){a&&g.signOut()},children:[Object(h.jsxs)("span",{className:"header__optionLineOne",children:["Hello, ",a?a.email:"Guest"]}),Object(h.jsx)("span",{className:"header__optionLineTwo",children:a?"Sign Out":"Sign In"})]})}),Object(h.jsx)(b.b,{to:"./orders",children:Object(h.jsxs)("div",{className:"header__option",children:[Object(h.jsx)("span",{className:"header__optionLineOne",children:"Returns"}),Object(h.jsx)("span",{className:"header__optionLineTwo",children:"& Orders"})]})}),Object(h.jsxs)("div",{className:"header__option",children:[Object(h.jsx)("span",{className:"header__optionLineOne",children:"Your"}),Object(h.jsx)("span",{className:"header__optionLineTwo",children:"Prime"})]}),Object(h.jsx)(b.b,{to:"./Checkout",children:Object(h.jsxs)("div",{className:"header__optionBasket",children:[Object(h.jsx)(u.a,{}),Object(h.jsx)("span",{className:"header__optionLineTwo header__backetCount",children:null===n||void 0===n?void 0:n.length})]})})]})]})},v=(c(81),c(82),c(32)),N=c.n(v),y=(c(83),c(40));var S=function(e){var t=e.id,c=e.title,n=e.image,a=e.price,s=e.rating,i=p(),r=Object(o.a)(i,2),j=(r[0].basket,r[1]);return Object(h.jsxs)("div",{className:"product",children:[Object(h.jsxs)("div",{className:"product__info",children:[Object(h.jsx)(y.NotificationContainer,{}),Object(h.jsx)("p",{className:"product__title",children:c}),Object(h.jsxs)("p",{className:"product__price",children:[Object(h.jsx)("small",{children:"$"}),Object(h.jsx)("strong",{children:a})]}),Object(h.jsx)("div",{className:"product__rating",children:Array(s).fill().map((function(e,t){return Object(h.jsx)(N.a,{})}))})]}),Object(h.jsx)("img",{src:n}),Object(h.jsx)("button",{onClick:function(){y.NotificationManager.success("Added 1 Product to shopping basket.","Product Added."),j({type:"ADD_TO_BASKET",item:{id:t,title:c,image:n,price:a,rating:s}})},children:"Add To Basket"})]})};var k=function(){return Object(h.jsx)("div",{className:"home",children:Object(h.jsxs)("div",{className:"home__container",children:[Object(h.jsx)("img",{className:"home__image",src:"https://images-fe.ssl-images-amazon.com/images/G/09/JP-hq/2020/img/Amazon_Pantry/XCM_Manual_1278771_JP_gw_hero_2_3474615_3000x1200_2X._CB417334680_.jpg",alt:""}),Object(h.jsxs)("div",{className:"home__row",children:[Object(h.jsx)(S,{id:1,title:"\u30ab\u30b4\u30e1 \u671d\u306e\u30d5\u30eb\u30fc\u30c4\u3053\u308c\u4e00\u672c 200ml\xd73\u672c",price:14.5,image:"https://images-na.ssl-images-amazon.com/images/I/91pcBsMh2KL._AC_SL1500_.jpg",rating:4}),Object(h.jsx)(S,{id:2,title:"\u30b7\u30eb\u30b3\u30c3\u30c8 \u6d88\u6bd2\u30a6\u30a7\u30c3\u30c8\u30c6\u30a3\u30c3\u30b7\u30e5 \u3064\u3081\u304b\u3048\u7528 40\u679a\u5165\xd73\u500b",price:35,image:"https://images-na.ssl-images-amazon.com/images/I/617BhcIjgnL._AC_SL1000_.jpg",rating:3})]}),Object(h.jsxs)("div",{className:"home__row",children:[Object(h.jsx)(S,{id:3,title:"\u30105G\u5bfe\u5fdc\u683c\u5b89SIM\u3011\u300c\u4e8b\u52d9\u624b\u6570\u65993,300\u5186\u304c\u7121\u6599\u300diPhone12\u5bfe\u5fdc/\u5bb6\u65cf\u5272\u3042\u308a/SIM\u30ab\u30fc\u30c9\u306e\u307f/Ymobile SIM\u30b9\u30bf\u30fc\u30bf\u30fc\u30ad\u30c3\u30c8",price:7.5,image:"https://images-na.ssl-images-amazon.com/images/I/71vnTFnRG3L._AC_SL1500_.jpg",rating:5}),Object(h.jsx)(S,{id:4,title:"\u30a2\u30b5\u30d2\u98f2\u6599 \u300c\u30ab\u30e9\u30c0\u30ab\u30eb\u30d4\u30b9\u300d430 430ml \xd73\u672c [\u6a5f\u80fd\u6027\u8868\u793a\u98df\u54c1]",price:28,image:"https://images-na.ssl-images-amazon.com/images/I/81IRoqnIZkL._AC_SL1500_.jpg",rating:4}),Object(h.jsx)(S,{id:5,title:"\u30ef\u30f3\u30e9\u30f3\u30af\u4e0a\u306e\u3064\u3051\u3054\u3053\u3061 \u30cd\u30d4\u30a2 \u9f3b\u30bb\u30ec\u30d6 \u30de\u30b9\u30af \u3081\u304f\u308b \u3075\u3064\u3046\u30b5\u30a4\u30ba 4\u679a\u5165",price:25,image:"https://images-na.ssl-images-amazon.com/images/I/816B9W8A6EL._AC_SL1500_.jpg",rating:3})]}),Object(h.jsx)("div",{className:"home__row",children:Object(h.jsx)(S,{id:6,title:"Apple iPhone 11 Pro 64GB \u30df\u30c3\u30c9\u30ca\u30a4\u30c8\u30b0\u30ea\u30fc\u30f3 SIM\u30d5\u30ea\u30fc (\u6574\u5099\u6e08\u307f\u54c1)",price:5600,image:"https://images-na.ssl-images-amazon.com/images/I/41j9jBfwwQL._AC_.jpg",rating:4})})]})})},C=c(11);c(87),c(88);var E=function(e){var t=e.id,c=e.image,n=e.title,a=e.price,s=e.rating,i=e.hideButton,r=p(),j=Object(o.a)(r,2),l=(j[0].basket,j[1]);return Object(h.jsxs)("div",{className:"checkoutProduct",children:[Object(h.jsx)("img",{className:"checkoutProduct__image",src:c,alt:""}),Object(h.jsxs)("div",{className:"checkoutProduct__info",children:[Object(h.jsx)("p",{className:"checkoutProduct__title",children:n}),Object(h.jsxs)("p",{className:"checkoutProduct__price",children:[Object(h.jsx)("short",{children:"$"}),Object(h.jsx)("strong",{children:a})]}),Object(h.jsx)("p",{className:"checkoutProduct__rating",children:Array(s).fill().map((function(e,t){return Object(h.jsx)(N.a,{})}))}),!i&&Object(h.jsx)("button",{onClick:function(){l({type:"REMOVE_FROM_BASKET",id:t})},children:"Remove from Backet"})]})]})},P=(c(89),c(25)),A=c.n(P),B=c(43),w=c(22),T=function(e){return null===e||void 0===e?void 0:e.reduce((function(e,t){return t.price+e}),0)},I=function(e,t){switch(t.type){case"ADD_TO_BASKET":return Object(w.a)(Object(w.a)({},e),{},{basket:[].concat(Object(B.a)(e.basket),[t.item])});case"REMOVE_FROM_BASKET":var c=e.basket.findIndex((function(e){return e.id===t.id})),n=Object(B.a)(e.basket);return c>=0?n.splice(c,1):console.warn("cannot remove product (id: ".concat(t.id,") as its not in basket!")),Object(w.a)(Object(w.a)({},e),{},{basket:n});case"EMPTY_BASKET":return Object(w.a)(Object(w.a)({},e),{},{basket:[]});case"SET_USER":return Object(w.a)(Object(w.a)({},e),{},{user:t.user});default:return e}};var M=function(){var e=Object(C.f)(),t=p(),c=Object(o.a)(t,2),n=c[0].basket;return c[1],Object(h.jsxs)("div",{className:"subtotal",children:[Object(h.jsx)(A.a,{renderText:function(e){return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("p",{children:["Subtotal (",null===n||void 0===n?void 0:n.length," items):",Object(h.jsx)("strong",{children:e})]}),Object(h.jsxs)("small",{className:"subtotal__gift",children:[Object(h.jsx)("input",{type:"checkbox"})," This order contains a gift"]})]})},decimalScale:2,value:T(n),displayType:"text",thousandSeparator:!0,prefix:"$"}),Object(h.jsx)("button",{onClick:function(t){return e.push("/payment")},children:"Proceed to Checkout"})]})},L=c(59);var z=function(){var e=p(),t=Object(o.a)(e,1)[0],c=t.basket,n=t.user,s=a.a.forwardRef((function(e,t){var c=e.item,n=e.index;return Object(h.jsx)("div",{ref:t,children:Object(h.jsx)(E,{title:c.title,id:c.id,rating:c.rating,price:c.price,image:c.image},"anim ".concat(n," ").concat(c.id))})}));return Object(h.jsxs)("div",{className:"checkout",children:[Object(h.jsxs)("div",{className:"checkout__left",children:[Object(h.jsx)("img",{className:"checkout__ad",src:"https://images-fe.ssl-images-amazon.com/images/G/09/JP-hq/2020/img/Camera/XCM_Manual_1289412_1490849_JP_3570575_650x45_ja_JP._CB416163977_.jpg",alt:""}),Object(h.jsxs)("div",{children:[Object(h.jsxs)("h3",{children:["Hello, ",n?n.email:"Guest","."]}),Object(h.jsx)("h2",{className:"checkout__title",children:0===c.length?"Shopping Basket is Empty...":"Your Shopping Basket:"}),Object(h.jsx)(L.a,{staggerDelayBy:150,enterAnimation:"accordionVertical",leaveAnimation:"accordionVertical",children:null===c||void 0===c?void 0:c.map((function(e,t){return Object(h.jsx)(s,{item:e,index:t},"an ".concat(t," ").concat(e.id))}))})]})]}),Object(h.jsx)("div",{className:"checkout__right",children:0===c.length?"":Object(h.jsx)(M,{})})]})};c(91);var R=function(){var e=Object(C.f)(),t=Object(n.useState)(""),c=Object(o.a)(t,2),a=c[0],s=c[1],i=Object(n.useState)(""),r=Object(o.a)(i,2),j=r[0],l=r[1];return Object(h.jsxs)("div",{className:"login",children:[Object(h.jsx)(b.b,{to:"/",children:Object(h.jsx)("img",{className:"login__logo",src:"https://upload.wikimedia.org/wikipedia/commons/thumb/a/af/Amazon.co.jp_logo.svg/1280px-Amazon.co.jp_logo.svg.png",alt:""})}),Object(h.jsxs)("div",{className:"login__container",children:[Object(h.jsx)("h1",{children:"Sign In"}),Object(h.jsxs)("form",{children:[Object(h.jsx)("h5",{children:"Email:"}),Object(h.jsx)("input",{type:"text",value:a,onChange:function(e){return s(e.target.value)}}),Object(h.jsx)("h5",{children:"Password:"}),Object(h.jsx)("input",{type:"password",value:j,onChange:function(e){return l(e.target.value)}}),Object(h.jsx)("button",{onClick:function(t){t.preventDefault(),g.signInWithEmailAndPassword(a,j).then((function(t){e.push("/")})).catch((function(e){return alert(e.message)}))},type:"submit",className:"login__SigninBtn",children:"Sign In"})]}),Object(h.jsx)("p",{children:"By continuing, you agree to website Conditions of Use and Privacy Notice."}),Object(h.jsx)("button",{onClick:function(t){t.preventDefault(),g.createUserWithEmailAndPassword(a,j).then((function(t){console.log(t),t&&e.push("/")})).catch((function(e){return alert(e.message)}))},className:"login__newAccountBtn",children:"Create a new account."})]})]})},D=c(28),G=c.n(D),Y=c(41),K=c(24),U=c(60),F=c.n(U).a.create({baseURL:"https://us-central1-clone-5ec49.cloudfunctions.net/api"});c(110);var J=function(){var e=p(),t=Object(o.a)(e,2),c=t[0],a=c.basket,s=c.user,i=t[1],r=Object(C.f)(),j=Object(K.useStripe)(),l=Object(K.useElements)(),d=Object(n.useState)(!1),u=Object(o.a)(d,2),m=u[0],O=u[1],x=Object(n.useState)(""),g=Object(o.a)(x,2),f=g[0],v=g[1],N=Object(n.useState)(null),y=Object(o.a)(N,2),S=y[0],k=y[1],P=Object(n.useState)(!0),B=Object(o.a)(P,2),w=B[0],I=B[1],M=Object(n.useState)(!0),L=Object(o.a)(M,2),z=L[0],R=L[1];Object(n.useEffect)((function(){(function(){var e=Object(Y.a)(G.a.mark((function e(){var t;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F({method:"post",url:"/payments/create?total=".concat(100*T(a))});case 2:t=e.sent,R(t.data.clientSecret);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[a]),console.log("THE SECRET IS >>>",z);var D=function(){var e=Object(Y.a)(G.a.mark((function e(t){return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),v(!0),e.next=4,j.confirmCardPayment(z,{payment_method:{card:l.getElement(K.CardElement)}}).then((function(e){var t=e.paymentIntent;_.collection("users").doc(null===s||void 0===s?void 0:s.uid).collection("orders").doc(t.id).set({basket:a,amount:t.amount,created:t.created}),O(!0),k(null),v(!1),i({type:"EMPTY_BASKET"}),r.replace("/orders")}));case 4:e.sent;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(h.jsx)("div",{className:"payment",children:Object(h.jsxs)("div",{className:"payment__container",children:[Object(h.jsxs)("h1",{children:["Checkout for ",Object(h.jsxs)(b.b,{to:"/checkout",children:[" ",null===a||void 0===a?void 0:a.length," items"]}),". "]}),Object(h.jsxs)("div",{className:"payment__box",children:[Object(h.jsx)("div",{className:"payment__title",children:Object(h.jsx)("h3",{children:"Delivery Address"})}),Object(h.jsxs)("div",{className:"payment__addr",children:[Object(h.jsx)("p",{children:s?s.email:"Guest"}),Object(h.jsx)("p",{children:"1/F, ABC Building"}),Object(h.jsx)("p",{children:"Causeway Bay, Hong Kong"})]})]}),Object(h.jsxs)("div",{className:"payment__box",children:[Object(h.jsx)("div",{className:"payment__title",children:Object(h.jsx)("h3",{children:"Review items and Delivery"})}),Object(h.jsx)("div",{className:"payment__items",children:a.map((function(e){return Object(h.jsx)(E,{id:e.id,title:e.title,image:e.image,price:e.price,rating:e.rating})}))})]}),Object(h.jsxs)("div",{className:"payment__box",children:[Object(h.jsx)("div",{className:"payment__title",children:Object(h.jsx)("h3",{children:"Pay Now"})}),Object(h.jsx)("div",{className:"stripe__box",children:Object(h.jsxs)("form",{onSubmit:D,children:[Object(h.jsx)(K.CardElement,{onChange:function(e){I(e.empty),k(e.error?e.error.message:"")}}),Object(h.jsxs)("div",{className:"payment__priceCon",children:[Object(h.jsx)(A.a,{renderText:function(e){return Object(h.jsxs)("h3",{children:["Total: ",e]})},decimalScale:2,value:T(a),displayType:"text",thousandSeparator:!0,prefix:"$"}),Object(h.jsx)("button",{disabled:f||w||m,children:Object(h.jsx)("span",{children:f?Object(h.jsx)("p",{children:"Processing"}):"Buy Now"})})]}),S&&Object(h.jsx)("div",{children:S})]})})]})]})})},V=(c(111),c(112),c(61)),H=c.n(V);var W=function(e){var t,c=e.order;return Object(h.jsxs)("div",{className:"order",children:[Object(h.jsx)("h2",{children:"Order"}),Object(h.jsx)("p",{children:H.a.unix(c.data.created).format("MMMM Do YYYY, h:mma")}),Object(h.jsx)("p",{className:"order__id",children:Object(h.jsx)("small",{children:c.id})}),null===(t=c.data.basket)||void 0===t?void 0:t.map((function(e){return Object(h.jsx)(E,{id:e.id,title:e.title,image:e.image,price:e.price,rating:e.rating,hideButton:!0})})),Object(h.jsx)(A.a,{renderText:function(e){return Object(h.jsxs)("h3",{className:"order__total",children:["Order Total: ",e]})},decimalScale:2,value:c.data.amount/100,displayType:"text",thousandSeparator:!0,prefix:"$"})]})};var $=function(){var e=Object(n.useState)([]),t=Object(o.a)(e,2),c=t[0],a=t[1],s=p(),i=Object(o.a)(s,2),r=i[0],j=(r.basket,r.user),l=(i[1],Object(C.f)());return Object(n.useEffect)((function(){j?_.collection("users").doc(null===j||void 0===j?void 0:j.uid).collection("orders").orderBy("created","desc").onSnapshot((function(e){a(e.docs.map((function(e){return{id:e.id,data:e.data()}})))})):(a([]),l.replace("/"))}),[j]),Object(h.jsxs)("div",{className:"orders",children:[Object(h.jsx)("h1",{children:"Your Order History"}),Object(h.jsx)("div",{className:"orders__order",children:null===c||void 0===c?void 0:c.map((function(e){return Object(h.jsx)(W,{order:e})}))})]})},q=c(62),X=Object(q.a)("pk_test_4eNhWgB5Zc5Y5pVqPxOEoM9500lOrPeyUD");var Z=function(){var e=p(),t=Object(o.a)(e,2);Object(r.a)(t[0]);var c=t[1];return Object(n.useEffect)((function(){g.onAuthStateChanged((function(e){console.log("USER NAME =>",e),c(e?{type:"SET_USER",user:e}:{type:"SET_USER",user:null})}))}),[]),Object(h.jsx)(b.a,{children:Object(h.jsx)("div",{className:"app",children:Object(h.jsxs)(C.c,{children:[Object(h.jsx)(C.a,{path:"/login",children:Object(h.jsx)(R,{})}),Object(h.jsxs)(C.a,{path:"/checkout",children:[Object(h.jsx)(f,{}),Object(h.jsx)(z,{})]}),Object(h.jsxs)(C.a,{path:"/payment",children:[Object(h.jsx)(f,{}),Object(h.jsx)(K.Elements,{stripe:X,children:Object(h.jsx)(J,{})})]}),Object(h.jsxs)(C.a,{path:"/orders",children:[Object(h.jsx)(f,{}),Object(h.jsx)($,{})]}),Object(h.jsxs)(C.a,{path:"/",children:[Object(h.jsx)(f,{}),Object(h.jsx)(k,{})]})]})})})},Q=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,128)).then((function(t){var c=t.getCLS,n=t.getFID,a=t.getFCP,s=t.getLCP,i=t.getTTFB;c(e),n(e),a(e),s(e),i(e)}))};i.a.render(Object(h.jsx)(a.a.StrictMode,{children:Object(h.jsx)(O,{initialState:{basket:[],user:null},reducer:I,children:Object(h.jsx)(Z,{})})}),document.getElementById("root")),Q()},69:function(e,t,c){},70:function(e,t,c){},71:function(e,t,c){},81:function(e,t,c){},82:function(e,t,c){},87:function(e,t,c){},88:function(e,t,c){},89:function(e,t,c){},91:function(e,t,c){}},[[115,1,2]]]);
//# sourceMappingURL=main.de4503ce.chunk.js.map